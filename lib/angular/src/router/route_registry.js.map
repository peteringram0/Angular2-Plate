{"version":3,"sources":["route_registry.js"],"names":[],"mappings":"AAAA,KAAK,SAAS,AAAC,0LAAoB,UAAS,SAAQ;;;;;;;;;;;;;;;;;;;AA6GpD,SAAS,0BAAwB,CAAE,OAAM,CAAG,CAAA,eAAc;AACxD,AAAI,MAAA,CAAA,QAAO,EAAI,CAAA,gBAAe,OAAO,AAAC,EAAC,CAAC;AACxC,mBAAe,QAAQ,AAAC,CAAC,OAAM,CAAE,SAAQ,CAAC,CAAE,YAAW,CAAC,GAAG,SAAC,SAAQ,CAAG,CAAA,UAAS,CAAM;AACpF,aAAO,CAAE,UAAS,CAAC,EAAI,IAAI,YAAU,AAAC,CAAC;AACrC,gBAAQ,CAAG,UAAQ;AACnB,aAAK,CAAG,CAAA,OAAM,CAAE,QAAO,CAAC;AAAA,MAC1B,CAAC,CAAC;IACJ,EAAC,CAAC;AACF,SAAO,IAAI,YAAU,AAAC,CAAC;AACrB,cAAQ,CAAG,gBAAc;AACzB,aAAO,CAAG,SAAO;AACjB,eAAS,CAAG,CAAA,OAAM,CAAE,YAAW,CAAC;AAAA,IAClC,CAAC,CAAC;EACJ;AA1HA,OAAO;AACD,UAAM,GADZ,SAAS,IAAG,CAAG;AAAf,aAAoB,KAAG,OAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,sBAAoB,KAAG,gBAAkB,CAAC;IAElC,CAFR,UAAS,IAAG;AAAZ,kBAAoB,KAAG,YAAkB,CAAC;AAA1C,sBAAoB,KAAG,gBAAkB,CAAC;IAElC,CAFR,UAAS,IAAG;AAAZ,WAAoB,KAAG,KAAkB,CAAC;AAA1C,kBAAoB,KAAG,YAAkB,CAAC;AAA1C,UAAoB,KAAG,IAAkB,CAAC;AAA1C,iBAAoB,KAAG,WAAkB,CAAC;AAA1C,gBAAoB,KAAG,UAAkB,CAAC;AAA1C,uBAAoB,KAAG,iBAAkB,CAAC;IAElC,CAFR,UAAS,IAAG;AAAZ,gBAAoB,KAAG,UAAkB,CAAC;AAA1C,cAAoB,KAAG,QAAkB,CAAC;AAA1C,aAAoB,KAAG,OAAkB,CAAC;AAA1C,oBAAoB,KAAG,cAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,kBAAoB,KAAG,YAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,gBAAoB,KAAG,UAAkB,CAAC;IAElC,CADuB;AACzB,UAAM;AAFZ,sBAAA,SAAQ,AAAC;AAgBF,eAAM,cAAY,CACZ,AAAC,CAAE;AACZ,aAAG,OAAO,EAAI,CAAA,UAAS,OAAO,AAAC,EAAC,CAAC;QACnC;AAjBQ,AAiGV,aAjGiB,CAAA,CAAC,eAAc,YAAY,CAAC,AAAC;AAkB5C,eAAK,CAAL,UAAO,eAAc,CAAG,CAAA,IAAG,CAAG,CAAA,SAAQ,AAAc,CAAG;cAAd,MAAI,6CAAI,KAAG;AAClD,iBAAK,cAAc,AAAC,CAAC,eAAc,CAAG,CAAA,MAAK,KAAK,IAAI,CAAG,KAAG,CAAG,CAAA,MAAK,KAAK,OAAO,CAAG,UAAQ,CAAG,CAAA,MAAK,KAAK,IAAI,CAAG,MAAI,CAAG,CAAA,MAAK,KAAK,OAAO,CAAC,CAAC;AACvI,eAAI,eAAc,IAAM,MAAI,CAAG;AAC7B,4BAAc,EAAI,IAAE,CAAC;YACvB;AAAA,AACI,cAAA,CAAA,UAAS,CAAC;AACd,eAAI,UAAS,SAAS,AAAC,CAAC,IAAG,OAAO,CAAG,gBAAc,CAAC,CAAG;AACrD,uBAAS,EAAI,CAAA,UAAS,IAAI,AAAC,CAAC,IAAG,OAAO,CAAG,gBAAc,CAAC,CAAC;YAC3D,KAAO;AACL,uBAAS,EAAI,IAAI,gBAAc,AAAC,EAAC,CAAC;AAClC,uBAAS,IAAI,AAAC,CAAC,IAAG,OAAO,CAAG,gBAAc,CAAG,WAAS,CAAC,CAAC;YAC1D;AAAA,AACA,eAAG,qBAAqB,AAAC,CAAC,SAAQ,CAAC,CAAC;AACpC,AAAI,cAAA,CAAA,UAAS,EAAI,CAAA,gBAAe,OAAO,AAAC,EAAC,CAAC;AAC1C,2BAAe,IAAI,AAAC,CAAC,UAAS,CAAG,UAAQ,CAAG,UAAQ,CAAC,CAAC;AACtD,AAAI,cAAA,CAAA,OAAM,EAAI,CAAA,gBAAe,OAAO,AAAC,EAAC,CAAC;AACvC,2BAAe,IAAI,AAAC,CAAC,OAAM,CAAG,aAAW,CAAG,WAAS,CAAC,CAAC;AACvD,qBAAS,UAAU,AAAC,CAAC,IAAG,CAAG,QAAM,CAAG,MAAI,CAAC,CAAC;UAC5C;AACA,6BAAmB,CAAnB,UAAqB,SAAQ,CAAG;AAC9B,eAAI,CAAC,MAAK,AAAC,CAAC,SAAQ,CAAC,CAAG;AACtB,qBAAO;YACT;AAAA,AACA,eAAI,UAAS,SAAS,AAAC,CAAC,IAAG,OAAO,CAAG,UAAQ,CAAC,CAAG;AAC/C,qBAAO;YACT;AAAA,AACI,cAAA,CAAA,WAAU,EAAI,CAAA,SAAQ,YAAY,AAAC,CAAC,SAAQ,CAAC,CAAC;AAClD,eAAI,SAAQ,AAAC,CAAC,WAAU,CAAC,CAAG;AAC1B,kBAAS,GAAA,CAAA,CAAA,EAAI,EAAA,CAAG,CAAA,CAAA,EAAI,CAAA,WAAU,OAAO,CAAG,CAAA,CAAA,EAAE,CAAG;AAC3C,AAAI,kBAAA,CAAA,UAAS,EAAI,CAAA,WAAU,CAAE,CAAA,CAAC,CAAC;AAC/B,mBAAI,UAAS,WAAa,YAAU,CAAG;AACrC,qBAAG,OAAO,AAAC,CAAC,SAAQ,CAAG,CAAA,UAAS,KAAK,CAAG,CAAA,UAAS,UAAU,CAAC,CAAC;gBAC/D;AAAA,cACF;AAAA,YACF;AAAA,UACF;AACA,kBAAQ,CAAR,UAAU,GAAE,AAAuB;cAApB,gBAAc,6CAAI,IAAE;;AACjC,iBAAK,cAAc,AAAC,CAAC,GAAE,CAAG,CAAA,MAAK,KAAK,OAAO,CAAG,gBAAc,CAAG,CAAA,MAAK,KAAK,IAAI,CAAC,CAAC;AAC/E,AAAI,cAAA,CAAA,mBAAkB,EAAI,CAAA,UAAS,IAAI,AAAC,CAAC,IAAG,OAAO,CAAG,gBAAc,CAAC,CAAC;AACtE,eAAI,OAAM,AAAC,CAAC,mBAAkB,CAAC,CAAG;AAChC,mBAAO,KAAG,CAAC;YACb;AAAA,AACI,cAAA,CAAA,SAAQ,EAAI,CAAA,mBAAkB,UAAU,AAAC,CAAC,GAAE,CAAC,CAAC;AAClD,gBAAS,GAAA,CAAA,CAAA,EAAI,EAAA,CAAG,CAAA,CAAA,EAAI,CAAA,SAAQ,OAAO,CAAG,CAAA,CAAA,EAAE,CAAG;AACzC,AAAI,gBAAA,CAAA,SAAQ,EAAI,CAAA,SAAQ,CAAE,CAAA,CAAC,CAAC;AAC5B,iBAAI,SAAQ,CAAE,cAAa,CAAC,OAAO,GAAK,EAAA,CAAG;AACzC,qBAAO,CAAA,yBAAwB,AAAC,CAAC,SAAQ,CAAG,gBAAc,CAAC,CAAC;cAC9D;AAAA,AACI,gBAAA,CAAA,QAAO,EAAI,CAAA,gBAAe,OAAO,AAAC,EAAC;AACnC,0BAAQ,EAAI,KAAG,CAAC;AACpB,6BAAe,QAAQ,AAAC,CAAC,SAAQ,CAAE,SAAQ,CAAC,CAAE,YAAW,CAAC,GAAG,SAAC,SAAQ,CAAG,CAAA,IAAG,CAAM;AAChF,mBAAI,CAAC,SAAQ,CAAG;AACd,yBAAO;gBACT;AAAA,AACI,kBAAA,CAAA,gBAAe,EAAI,CAAA,cAAa,AAAC,CAAC,SAAQ,CAAE,cAAa,CAAC,CAAG,UAAQ,CAAC,CAAC;AAC3E,mBAAI,SAAQ,AAAC,CAAC,gBAAe,CAAC,CAAG;AAC/B,iCAAe,OAAO,EAAI,CAAA,SAAQ,CAAE,QAAO,CAAC,CAAC;AAC7C,yBAAO,CAAE,IAAG,CAAC,EAAI,iBAAe,CAAC;gBACnC,KAAO;AACL,0BAAQ,EAAI,MAAI,CAAC;gBACnB;AAAA,cACF,EAAC,CAAC;AACF,iBAAI,SAAQ,CAAG;AACb,qBAAO,IAAI,YAAU,AAAC,CAAC;AACrB,0BAAQ,CAAG,gBAAc;AACzB,yBAAO,CAAG,SAAO;AACjB,2BAAS,CAAG,CAAA,SAAQ,CAAE,YAAW,CAAC;AAAA,gBACpC,CAAC,CAAC;cACJ;AAAA,YACF;AAAA,AACA,iBAAO,KAAG,CAAC;UACb;AACA,iBAAO,CAAP,UAAS,IAAG,CAAG,CAAA,MAAK,CAAG;AACrB,iBAAK,cAAc,AAAC,CAAC,IAAG,CAAG,CAAA,MAAK,KAAK,OAAO,CAAG,OAAK,CAAG,CAAA,MAAK,KAAK,IAAI,CAAC,CAAC;AACvE,AAAI,cAAA,CAAA,mBAAkB,EAAI,CAAA,UAAS,IAAI,AAAC,CAAC,IAAG,OAAO,CAAG,IAAE,CAAC,CAAC;AAC1D,eAAI,SAAQ,AAAC,CAAC,mBAAkB,CAAC,CAAG;AAClC,mBAAO,CAAA,mBAAkB,SAAS,AAAC,CAAC,IAAG,CAAG,OAAK,CAAC,CAAC;YACnD;AAAA,UACF;AAAA,aA/F8D,CAAC;MACzD,AAAC,EAAC,CAJ0B,CAAA;AAApC,cAAQ,AAAC,gCAAqC,CAAA;AAoG9C,WAAK,eAAe,AAAC,CAAC,aAAY,UAAU,OAAO,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAQ,AAAC,CAAE;AACjF,eAAO,EAAC,EAAC,CAAG,EAAC,MAAK,KAAK,OAAO,CAAC,CAAG,EAAC,MAAK,KAAK,IAAI,CAAC,CAAG,EAAC,MAAK,KAAK,OAAO,CAAC,CAAC,CAAC;QAC5E,CAAC,CAAC,CAAC;AACL,WAAK,eAAe,AAAC,CAAC,aAAY,UAAU,UAAU,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAQ,AAAC,CAAE;AACpF,eAAO,EAAC,CAAC,MAAK,KAAK,OAAO,CAAC,CAAG,GAAC,CAAC,CAAC;QACnC,CAAC,CAAC,CAAC;AACL,WAAK,eAAe,AAAC,CAAC,aAAY,UAAU,SAAS,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAQ,AAAC,CAAE;AACnF,eAAO,EAAC,CAAC,MAAK,KAAK,OAAO,CAAC,CAAG,EAAC,MAAK,KAAK,IAAI,CAAC,CAAC,CAAC;QAClD,CAAC,CAAC,CAAC;IA1G0B;EAC3B,CAAA;AADI,CAAC,CAAC;AA2H8B","file":"src/router/route_registry.js","sourceRoot":"/Users/peteringram/Code/Angular2-Plate/node_modules/angular2/es6/dev/","sourcesContent":["import {assert} from \"rtts_assert/rtts_assert\";\nimport {RouteRecognizer} from './route_recognizer';\nimport {Instruction,\n  noopInstruction} from './instruction';\nimport {List,\n  ListWrapper,\n  Map,\n  MapWrapper,\n  StringMap,\n  StringMapWrapper} from 'angular2/src/facade/collection';\nimport {isPresent,\n  isBlank,\n  isType,\n  StringWrapper} from 'angular2/src/facade/lang';\nimport {RouteConfig} from './route_config';\nimport {reflector} from 'angular2/src/reflection/reflection';\nexport class RouteRegistry {\n  constructor() {\n    this._rules = MapWrapper.create();\n  }\n  config(parentComponent, path, component, alias = null) {\n    assert.argumentTypes(parentComponent, assert.type.any, path, assert.type.string, component, assert.type.any, alias, assert.type.string);\n    if (parentComponent === 'app') {\n      parentComponent = '/';\n    }\n    var recognizer;\n    if (MapWrapper.contains(this._rules, parentComponent)) {\n      recognizer = MapWrapper.get(this._rules, parentComponent);\n    } else {\n      recognizer = new RouteRecognizer();\n      MapWrapper.set(this._rules, parentComponent, recognizer);\n    }\n    this._configFromComponent(component);\n    var components = StringMapWrapper.create();\n    StringMapWrapper.set(components, 'default', component);\n    var handler = StringMapWrapper.create();\n    StringMapWrapper.set(handler, 'components', components);\n    recognizer.addConfig(path, handler, alias);\n  }\n  _configFromComponent(component) {\n    if (!isType(component)) {\n      return ;\n    }\n    if (MapWrapper.contains(this._rules, component)) {\n      return ;\n    }\n    var annotations = reflector.annotations(component);\n    if (isPresent(annotations)) {\n      for (var i = 0; i < annotations.length; i++) {\n        var annotation = annotations[i];\n        if (annotation instanceof RouteConfig) {\n          this.config(component, annotation.path, annotation.component);\n        }\n      }\n    }\n  }\n  recognize(url, parentComponent = '/') {\n    assert.argumentTypes(url, assert.type.string, parentComponent, assert.type.any);\n    var componentRecognizer = MapWrapper.get(this._rules, parentComponent);\n    if (isBlank(componentRecognizer)) {\n      return null;\n    }\n    var solutions = componentRecognizer.recognize(url);\n    for (var i = 0; i < solutions.length; i++) {\n      var candidate = solutions[i];\n      if (candidate['unmatchedUrl'].length == 0) {\n        return handlerToLeafInstructions(candidate, parentComponent);\n      }\n      var children = StringMapWrapper.create(),\n          allMapped = true;\n      StringMapWrapper.forEach(candidate['handler']['components'], (component, name) => {\n        if (!allMapped) {\n          return ;\n        }\n        var childInstruction = this.recognize(candidate['unmatchedUrl'], component);\n        if (isPresent(childInstruction)) {\n          childInstruction.params = candidate['params'];\n          children[name] = childInstruction;\n        } else {\n          allMapped = false;\n        }\n      });\n      if (allMapped) {\n        return new Instruction({\n          component: parentComponent,\n          children: children,\n          matchedUrl: candidate['matchedUrl']\n        });\n      }\n    }\n    return null;\n  }\n  generate(name, params) {\n    assert.argumentTypes(name, assert.type.string, params, assert.type.any);\n    var componentRecognizer = MapWrapper.get(this._rules, '/');\n    if (isPresent(componentRecognizer)) {\n      return componentRecognizer.generate(name, params);\n    }\n  }\n}\nObject.defineProperty(RouteRegistry.prototype.config, \"parameters\", {get: function() {\n    return [[], [assert.type.string], [assert.type.any], [assert.type.string]];\n  }});\nObject.defineProperty(RouteRegistry.prototype.recognize, \"parameters\", {get: function() {\n    return [[assert.type.string], []];\n  }});\nObject.defineProperty(RouteRegistry.prototype.generate, \"parameters\", {get: function() {\n    return [[assert.type.string], [assert.type.any]];\n  }});\nfunction handlerToLeafInstructions(context, parentComponent) {\n  var children = StringMapWrapper.create();\n  StringMapWrapper.forEach(context['handler']['components'], (component, outletName) => {\n    children[outletName] = new Instruction({\n      component: component,\n      params: context['params']\n    });\n  });\n  return new Instruction({\n    component: parentComponent,\n    children: children,\n    matchedUrl: context['matchedUrl']\n  });\n}\n//# sourceMappingURL=route_registry.js.map\n\n//# sourceMappingURL=./route_registry.map"]}