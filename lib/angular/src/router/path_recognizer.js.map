{"version":3,"sources":["path_recognizer.js"],"names":[],"mappings":"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","file":"src/router/path_recognizer.js","sourceRoot":"/Users/peteringram/Code/Angular2-Plate/node_modules/angular2/es6/dev/","sourcesContent":["import {assert} from \"rtts_assert/rtts_assert\";\nimport {RegExp,\n  RegExpWrapper,\n  RegExpMatcherWrapper,\n  StringWrapper,\n  isPresent} from 'angular2/src/facade/lang';\nimport {Map,\n  MapWrapper,\n  StringMap,\n  StringMapWrapper,\n  List,\n  ListWrapper} from 'angular2/src/facade/collection';\nimport {escapeRegex} from './url';\nclass StaticSegment {\n  constructor(string) {\n    assert.argumentTypes(string, assert.type.string);\n    this.string = string;\n    this.name = '';\n    this.regex = escapeRegex(string);\n  }\n  generate(params) {\n    return this.string;\n  }\n}\nObject.defineProperty(StaticSegment, \"parameters\", {get: function() {\n    return [[assert.type.string]];\n  }});\nclass DynamicSegment {\n  constructor(name) {\n    assert.argumentTypes(name, assert.type.string);\n    this.name = name;\n    this.regex = \"([^/]+)\";\n  }\n  generate(params) {\n    assert.argumentTypes(params, StringMap);\n    return StringMapWrapper.get(params, this.name);\n  }\n}\nObject.defineProperty(DynamicSegment, \"parameters\", {get: function() {\n    return [[assert.type.string]];\n  }});\nObject.defineProperty(DynamicSegment.prototype.generate, \"parameters\", {get: function() {\n    return [[StringMap]];\n  }});\nclass StarSegment {\n  constructor(name) {\n    assert.argumentTypes(name, assert.type.string);\n    this.name = name;\n    this.regex = \"(.+)\";\n  }\n  generate(params) {\n    assert.argumentTypes(params, StringMap);\n    return StringMapWrapper.get(params, this.name);\n  }\n}\nObject.defineProperty(StarSegment, \"parameters\", {get: function() {\n    return [[assert.type.string]];\n  }});\nObject.defineProperty(StarSegment.prototype.generate, \"parameters\", {get: function() {\n    return [[StringMap]];\n  }});\nvar paramMatcher = RegExpWrapper.create(\"^:([^\\/]+)$\");\nvar wildcardMatcher = RegExpWrapper.create(\"^\\\\*([^\\/]+)$\");\nfunction parsePathString(route) {\n  assert.argumentTypes(route, assert.type.string);\n  if (route[0] === \"/\") {\n    route = StringWrapper.substring(route, 1);\n  }\n  var segments = splitBySlash(route);\n  var results = ListWrapper.create();\n  for (var i = 0; i < segments.length; i++) {\n    var segment = segments[i],\n        match;\n    if (isPresent(match = RegExpWrapper.firstMatch(paramMatcher, segment))) {\n      ListWrapper.push(results, new DynamicSegment(match[1]));\n    } else if (isPresent(match = RegExpWrapper.firstMatch(wildcardMatcher, segment))) {\n      ListWrapper.push(results, new StarSegment(match[1]));\n    } else if (segment.length > 0) {\n      ListWrapper.push(results, new StaticSegment(segment));\n    }\n  }\n  return assert.returnType((results), List);\n}\nObject.defineProperty(parsePathString, \"parameters\", {get: function() {\n    return [[assert.type.string]];\n  }});\nvar SLASH_RE = RegExpWrapper.create('/');\nfunction splitBySlash(url) {\n  assert.argumentTypes(url, assert.type.string);\n  return assert.returnType((StringWrapper.split(url, SLASH_RE)), assert.genericType(List, assert.type.string));\n}\nObject.defineProperty(splitBySlash, \"parameters\", {get: function() {\n    return [[assert.type.string]];\n  }});\nexport class PathRecognizer {\n  constructor(path, handler) {\n    assert.argumentTypes(path, assert.type.string, handler, assert.type.any);\n    this.handler = handler;\n    this.segments = ListWrapper.create();\n    var segments = parsePathString(path);\n    var regexString = '^';\n    ListWrapper.forEach(segments, (segment) => {\n      regexString += '/' + segment.regex;\n    });\n    this.regex = RegExpWrapper.create(regexString);\n    this.segments = segments;\n  }\n  parseParams(url) {\n    assert.argumentTypes(url, assert.type.string);\n    var params = StringMapWrapper.create();\n    var urlPart = url;\n    for (var i = 0; i < this.segments.length; i++) {\n      var segment = this.segments[i];\n      var match = RegExpWrapper.firstMatch(RegExpWrapper.create('/' + segment.regex), urlPart);\n      urlPart = StringWrapper.substring(urlPart, match[0].length);\n      if (segment.name.length > 0) {\n        StringMapWrapper.set(params, segment.name, match[1]);\n      }\n    }\n    return assert.returnType((params), StringMap);\n  }\n  generate(params) {\n    return assert.returnType((ListWrapper.join(ListWrapper.map(this.segments, (segment) => '/' + segment.generate(params)), '')), assert.type.string);\n  }\n}\nObject.defineProperty(PathRecognizer, \"parameters\", {get: function() {\n    return [[assert.type.string], [assert.type.any]];\n  }});\nObject.defineProperty(PathRecognizer.prototype.parseParams, \"parameters\", {get: function() {\n    return [[assert.type.string]];\n  }});\nObject.defineProperty(PathRecognizer.prototype.generate, \"parameters\", {get: function() {\n    return [[StringMap]];\n  }});\n//# sourceMappingURL=path_recognizer.js.map\n\n//# sourceMappingURL=./path_recognizer.map"]}