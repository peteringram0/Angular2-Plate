{"version":3,"sources":["view_factory.js"],"names":[],"mappings":"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","file":"src/render/dom/view/view_factory.js","sourceRoot":"/Users/peteringram/Code/Angular2-Plate/node_modules/angular2/es6/dev/","sourcesContent":["import {assert} from \"rtts_assert/rtts_assert\";\nimport {OpaqueToken,\n  Inject,\n  Injectable} from 'angular2/di';\nimport {int,\n  isPresent,\n  isBlank,\n  BaseException} from 'angular2/src/facade/lang';\nimport {ListWrapper,\n  MapWrapper,\n  Map,\n  StringMapWrapper,\n  List} from 'angular2/src/facade/collection';\nimport {DOM} from 'angular2/src/dom/dom_adapter';\nimport {Content} from '../shadow_dom/content_tag';\nimport {ShadowDomStrategy} from '../shadow_dom/shadow_dom_strategy';\nimport {EventManager} from 'angular2/src/render/dom/events/event_manager';\nimport * as pvModule from './proto_view';\nimport * as viewModule from './view';\nimport {NG_BINDING_CLASS_SELECTOR,\n  NG_BINDING_CLASS} from '../util';\nexport const VIEW_POOL_CAPACITY = 'render.ViewFactory.viewPoolCapacity';\nexport class ViewFactory {\n  constructor(poolCapacityPerProtoView, eventManager, shadowDomStrategy) {\n    assert.argumentTypes(poolCapacityPerProtoView, assert.type.any, eventManager, EventManager, shadowDomStrategy, ShadowDomStrategy);\n    this._poolCapacityPerProtoView = poolCapacityPerProtoView;\n    this._pooledViewsPerProtoView = MapWrapper.create();\n    this._eventManager = eventManager;\n    this._shadowDomStrategy = shadowDomStrategy;\n  }\n  createInPlaceHostView(hostElementSelector, hostProtoView) {\n    assert.argumentTypes(hostElementSelector, assert.type.any, hostProtoView, pvModule.RenderProtoView);\n    return assert.returnType((this._createView(hostProtoView, hostElementSelector)), viewModule.RenderView);\n  }\n  getView(protoView) {\n    assert.argumentTypes(protoView, pvModule.RenderProtoView);\n    var pooledViews = MapWrapper.get(this._pooledViewsPerProtoView, protoView);\n    if (isPresent(pooledViews) && pooledViews.length > 0) {\n      return assert.returnType((ListWrapper.removeLast(pooledViews)), viewModule.RenderView);\n    }\n    return assert.returnType((this._createView(protoView, null)), viewModule.RenderView);\n  }\n  returnView(view) {\n    assert.argumentTypes(view, viewModule.RenderView);\n    if (view.hydrated) {\n      throw new BaseException('View is still hydrated');\n    }\n    var protoView = view.proto;\n    var pooledViews = MapWrapper.get(this._pooledViewsPerProtoView, protoView);\n    if (isBlank(pooledViews)) {\n      pooledViews = [];\n      MapWrapper.set(this._pooledViewsPerProtoView, protoView, pooledViews);\n    }\n    if (pooledViews.length < this._poolCapacityPerProtoView) {\n      ListWrapper.push(pooledViews, view);\n    }\n  }\n  _createView(protoView, inplaceElement) {\n    assert.argumentTypes(protoView, pvModule.RenderProtoView, inplaceElement, assert.type.any);\n    if (isPresent(protoView.imperativeRendererId)) {\n      return assert.returnType((new viewModule.RenderView(protoView, [], [], [], [])), viewModule.RenderView);\n    }\n    var rootElementClone = isPresent(inplaceElement) ? inplaceElement : DOM.importIntoDoc(protoView.element);\n    var elementsWithBindingsDynamic;\n    if (protoView.isTemplateElement) {\n      elementsWithBindingsDynamic = DOM.querySelectorAll(DOM.content(rootElementClone), NG_BINDING_CLASS_SELECTOR);\n    } else {\n      elementsWithBindingsDynamic = DOM.getElementsByClassName(rootElementClone, NG_BINDING_CLASS);\n    }\n    var elementsWithBindings = ListWrapper.createFixedSize(elementsWithBindingsDynamic.length);\n    for (var binderIdx = 0; binderIdx < elementsWithBindingsDynamic.length; ++binderIdx) {\n      elementsWithBindings[binderIdx] = elementsWithBindingsDynamic[binderIdx];\n    }\n    var viewRootNodes;\n    if (protoView.isTemplateElement) {\n      var childNode = DOM.firstChild(DOM.content(rootElementClone));\n      viewRootNodes = [];\n      while (childNode != null) {\n        ListWrapper.push(viewRootNodes, childNode);\n        childNode = DOM.nextSibling(childNode);\n      }\n    } else {\n      viewRootNodes = [rootElementClone];\n    }\n    var binders = protoView.elementBinders;\n    var boundTextNodes = [];\n    var boundElements = ListWrapper.createFixedSize(binders.length);\n    var contentTags = ListWrapper.createFixedSize(binders.length);\n    for (var binderIdx = 0; binderIdx < binders.length; binderIdx++) {\n      var binder = binders[binderIdx];\n      var element;\n      if (binderIdx === 0 && protoView.rootBindingOffset === 1) {\n        element = rootElementClone;\n      } else {\n        element = elementsWithBindings[binderIdx - protoView.rootBindingOffset];\n      }\n      boundElements[binderIdx] = element;\n      var childNodes = DOM.childNodes(DOM.templateAwareRoot(element));\n      var textNodeIndices = binder.textNodeIndices;\n      for (var i = 0; i < textNodeIndices.length; i++) {\n        ListWrapper.push(boundTextNodes, childNodes[textNodeIndices[i]]);\n      }\n      var contentTag = null;\n      if (isPresent(binder.contentTagSelector)) {\n        contentTag = new Content(element, binder.contentTagSelector);\n      }\n      contentTags[binderIdx] = contentTag;\n    }\n    var view = new viewModule.RenderView(protoView, viewRootNodes, boundTextNodes, boundElements, contentTags);\n    for (var binderIdx = 0; binderIdx < binders.length; binderIdx++) {\n      var binder = binders[binderIdx];\n      var element = boundElements[binderIdx];\n      if (binder.hasStaticComponent()) {\n        var childView = this._createView(binder.nestedProtoView, null);\n        ViewFactory.setComponentView(this._shadowDomStrategy, view, binderIdx, childView);\n      }\n      if (isPresent(binder.eventLocals) && isPresent(binder.localEvents)) {\n        for (var i = 0; i < binder.localEvents.length; i++) {\n          this._createEventListener(view, element, binderIdx, binder.localEvents[i].name, binder.eventLocals);\n        }\n      }\n    }\n    return assert.returnType((view), viewModule.RenderView);\n  }\n  _createEventListener(view, element, elementIndex, eventName, eventLocals) {\n    this._eventManager.addEventListener(element, eventName, (event) => {\n      view.dispatchEvent(elementIndex, eventName, event);\n    });\n  }\n  static setComponentView(shadowDomStrategy, hostView, elementIndex, componentView) {\n    assert.argumentTypes(shadowDomStrategy, ShadowDomStrategy, hostView, viewModule.RenderView, elementIndex, assert.type.number, componentView, viewModule.RenderView);\n    var element = hostView.boundElements[elementIndex];\n    var lightDom = shadowDomStrategy.constructLightDom(hostView, componentView, element);\n    shadowDomStrategy.attachTemplate(element, componentView);\n    hostView.lightDoms[elementIndex] = lightDom;\n    hostView.componentChildViews[elementIndex] = componentView;\n  }\n}\nObject.defineProperty(ViewFactory, \"annotations\", {get: function() {\n    return [new Injectable()];\n  }});\nObject.defineProperty(ViewFactory, \"parameters\", {get: function() {\n    return [[new Inject(VIEW_POOL_CAPACITY)], [EventManager], [ShadowDomStrategy]];\n  }});\nObject.defineProperty(ViewFactory.prototype.createInPlaceHostView, \"parameters\", {get: function() {\n    return [[], [pvModule.RenderProtoView]];\n  }});\nObject.defineProperty(ViewFactory.prototype.getView, \"parameters\", {get: function() {\n    return [[pvModule.RenderProtoView]];\n  }});\nObject.defineProperty(ViewFactory.prototype.returnView, \"parameters\", {get: function() {\n    return [[viewModule.RenderView]];\n  }});\nObject.defineProperty(ViewFactory.prototype._createView, \"parameters\", {get: function() {\n    return [[pvModule.RenderProtoView], []];\n  }});\nObject.defineProperty(ViewFactory.setComponentView, \"parameters\", {get: function() {\n    return [[ShadowDomStrategy], [viewModule.RenderView], [assert.type.number], [viewModule.RenderView]];\n  }});\n//# sourceMappingURL=view_factory.js.map\n\n//# sourceMappingURL=./view_factory.map"]}